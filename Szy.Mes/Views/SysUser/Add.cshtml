
@{
    ViewData["Title"] = "用户新增";
    Layout = null; // 作为页签内容，不使用布局
}

<div class="user-add-container">
    <h3>用户新增</h3>
    <form id="userAddForm">
        <div class="form-item">
            <label>用户名：</label>
            <input type="text" name="UserName" required placeholder="请输入用户名" />
        </div>
        <div class="form-item">
            <label>密码：</label>
            <input type="password" name="Password" required placeholder="请输入密码" />
        </div>
        <div class="form-item">
            <label>真实姓名：</label>
            <input type="text" name="RealName" required placeholder="请输入真实姓名" />
        </div>
        <div class="form-actions">
            <button type="submit">提交</button>
            <button type="reset">重置</button>
        </div>
    </form>
</div>

<script>
    // 表单提交
    document.getElementById('userAddForm').addEventListener('submit', async function (e) {
        e.preventDefault();
        const formData = new FormData(this);
        const user = {
            UserName: formData.get('UserName'),
            Password: formData.get('Password'),
            RealName: formData.get('RealName')
        };

        const res = await fetch('/SysUser/Add', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(user)
        });
        const data = await res.json();
        alert(data.msg);
        if (data.success) {
            this.reset();
        }
    });
</script>